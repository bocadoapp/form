(this.webpackJsonpform=this.webpackJsonpform||[]).push([[0],{119:function(e,a,t){e.exports=t.p+"static/media/logo.ceaf2aeb.png"},133:function(e,a,t){e.exports=t(151)},146:function(e,a,t){},151:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(117),c=t.n(l),s=t(81),i=t(82),m=t(114),o=t(124),u=t(31),d=t(157),f=["ca","es"],p={es:{intro1:"Somos <logo>Bocado</span>! Estamos cocinando, en pleno confinamiento por la COVID19, una aplicaci\xf3n m\xf3vil con el objetivo de compartir recetas y men\xfas saludables y equilibrados entre usuarios.",intro2:"Nosotros estamos centrados en el desarrollo y el dise\xf1o pero nos gustar\xeda poder contar contigo porque nos ayudes a completar un recetario inicial. Hemos preparado un formulario r\xe1pido y sencillo para que puedas subir tantas recetas como quieras y puedas :).",intro3:"Nos comprometemos a darte acceso para que puedas testear la app cuando est\xe9 terminada antes de presentarla al p\xfablico."},ca:{intro1:"Som <logo>Bocado</logo>! Estem cuinant, en ple confinament per la COVID19, una aplicaci\xf3 m\xf2bil amb l'objectiu de compartir receptes i men\xfas saludables i equilibrats entre usuaris.",intro2:"Nosaltres estem centrats en el desenvolupament i el disseny per\xf2 ens agradaria poder comptar amb tu perqu\xe8 ens ajudis a completar un receptari inicial. Hem preparat un formulari r\xe0pid i senzill perqu\xe8 puguis pujar tantes receptes com vulguis i puguis :).",intro3:"Ens comprometem a donar-te acc\xe9s per a que puguis testejar l'app tan bon punt la tinguem enllestida abans que en fem la presentaci\xf3 p\xfablica ;)"}},b=t(73),E=t(52),g=t(18),v=t(24),x=Object(n.createContext)(),y={step:Number(window.location.hash.split("/").find((function(e){return!isNaN(Number(e))})))||1,numSteps:4,user:null};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_STEP":return Object(v.a)({},e,{step:a.step});case"SET_USER":return Object(v.a)({},e,{user:a.user});default:return Object(v.a)({},e)}}function j(e){var a=e.children;return r.a.createElement(x.Provider,{value:Object(n.useReducer)(N,y)},a)}function h(){var e=Object(n.useContext)(x),a=Object(g.a)(e,2),t=a[0],r=a[1];return Object(v.a)({},t,{setStep:function(e){return r({type:"SET_STEP",step:e})},setUser:function(e){return r({type:"SET_USER",user:e})}})}var O=t(155),w=t(48),k=t.n(w),S=[{num:1,name:"Registre",icon:"fas fa-user-plus"},{num:2,name:"Informacio general",icon:"fas fa-info-circle"},{num:3,name:"Ingredients",icon:"fas fa-pizza-slice"},{num:4,name:"Passos",icon:"fas fa-list-ol"}],C=function(){try{var e=JSON.parse(localStorage.getItem("bocado_user"));return e||null}catch(a){return null}},R=function(){var e=h().user;if(!e)return null;var a=e.name.split(" ").map((function(e){return e.slice(0,1)})).join("").slice(0,2);return r.a.createElement("div",{className:"w-10 h-10 rounded-full overflow-hidden shadow-lg"},e.pic?r.a.createElement("img",{src:e.pic,alt:"profile pic"}):r.a.createElement("svg",{viewBox:"0 0 100 100"},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"Gradient1"},r.a.createElement("stop",{className:"stop1",offset:"0%"}),r.a.createElement("stop",{className:"stop3",offset:"100%"})),r.a.createElement("linearGradient",{id:"Gradient2",x1:"0",x2:"0",y1:"0",y2:"1"},r.a.createElement("stop",{offset:"0%",stopColor:"#f4783c"}),r.a.createElement("stop",{offset:"100%",stopColor:"#e41c53"}))),r.a.createElement("circle",{id:"avatar",cx:"50",cy:"50",r:"50"}),r.a.createElement("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"3rem",fill:"white"},a)))},q=function(){var e=h().step,a=Object(E.g)(),t=Object(O.a)().locale,l=C(),c=Object(n.useCallback)((function(e){a.push("/".concat(t,"/").concat(e))}),[a,t]);return r.a.createElement("aside",{className:"w-full md:max-w-xs flex md:mr-10"},r.a.createElement("div",{className:"w-full flex md:flex-col"},S.map((function(a){var t=a.name,n=a.icon,s=a.num;return r.a.createElement("div",{key:"step-".concat(s),className:k()("flex w-full items-center md:px-3 py-4 justify-center md:justify-start",e===s?"text-gray-700":"text-gray-400",e===s&&"md:shadow-md md:rounded-lg",e!==s&&1!==s&&"md:cursor-pointer"),onClick:function(){return 1!==s&&e!==s&&c(s)}},r.a.createElement("span",{className:"mr-3"},1===s&&l?r.a.createElement(R,null):r.a.createElement("i",{className:n})),r.a.createElement("span",{className:"hidden md:inline"},1===s&&l?l.username||l.name:t))}))))},P=t(119),U=t.n(P),I=function(){return r.a.createElement("nav",{className:"flex sticky top-0 md:flex-row justify-start items-center w-full py-3 px-6 md:px-20 lg:px-32 mb-10 md:mb-10"},r.a.createElement("div",{className:"flex justify-end md:justify-start"},r.a.createElement(u.b,{to:"/"},r.a.createElement("figure",null,r.a.createElement("img",{src:U.a,alt:"Bocado",style:{maxWidth:"150px"}})))),r.a.createElement("div",{className:"menu hidden md:flex w-full justify-center ml-auto mr-auto"}),r.a.createElement("div",{className:"hidden md:flex md:max-w-xs justfy-end"}))},T=t(26),_={user:{name:"",email:""},name:"test",diners:"",time:"",cooking_time:"",cuisine:"",ingredients:[],steps:[],pics:[],videos:[],picsPerStep:[]},B=function(e){var a=e.children;return r.a.createElement(T.d,{initialValues:_,onSubmit:function(e){console.log("values",e)},validate:function(){}},(function(e){e.values,e.errors;return r.a.createElement(T.c,{className:"w-full"},a)}))},V=function(e){var a=e.children,t=h(),l=t.setUser,c=t.step,s=Object(E.g)(),i=Object(O.a)().locale,m=C(),o=Object(n.useCallback)((function(){return m?l(m):1===c?s.push("/".concat(i,"/1")):void 0}),[s,i,c,m,l]);return Object(n.useEffect)((function(){return o()}),[]),r.a.createElement("div",{className:"wrapper"},r.a.createElement(I,null),r.a.createElement("div",{className:"flex flex-col md:flex-row w-full lg:max-w-screen-md lg:max-w-screen-lg m-auto leading-relaxed"},r.a.createElement(q,null),r.a.createElement(B,null,a)))},$=t(51),z=t(71),F=t(125),L=t(57),A=t(116),D=t(33),G=function(e){var a=e.className,t=e.type,l=Object(E.g)(),c=h().step,s=Object(O.a)().locale,i=Object(n.useCallback)((function(){var e="prev"===t?Number(c)-1:Number(c)+1;l.push("/".concat(s,"/").concat(e))}),[c,t,l,s]);return r.a.createElement("div",{onClick:i,style:{top:"50%"},className:k()(a,"absolute text-5xl p-5 text-gray-600 cursor-pointer","prev"===t?"left-0":"right-0")},"prev"===t?r.a.createElement("i",{className:"fas fa-angle-left"}):r.a.createElement("i",{className:"fas fa-angle-right"}))},H=function(){var e=h(),a=e.step,t=e.numSteps;return r.a.createElement(r.a.Fragment,null,a>1&&r.a.createElement(G,{type:"prev"}),a<t&&r.a.createElement(G,{type:"next"}))},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.arrows,t=void 0!==a&&a;return function(e){return function(a){return r.a.createElement(b.b.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},className:"flex w-full"},r.a.createElement(e,a),t&&r.a.createElement(H,null))}}};function M(){var e=Object(z.a)(["\n  mutation Upload($file: Upload) {\n    upload(file: $file) {\n      _id\n    }\n  }\n"]);return M=function(){return e},e}var K=Object(L.a)(M()),Q=J()((function(){var e=Object(n.useState)([]),a=Object(g.a)(e,2),t=a[0],l=a[1],c=Object(A.a)(K),s=Object(g.a)(c,1)[0],i=Object(E.g)(),m=Object(O.a)().locale,o=Object(n.useCallback)((function(e){l([].concat(Object($.a)(t),Object($.a)(e.map((function(e){return Object(v.a)({},e,{preview:URL.createObjectURL(e)})}))))),s({variables:{file:e[0]}})}),[t,l,s]),u=Object(F.a)({onDrop:o,accept:"image/*"}),d=u.getRootProps,f=u.getInputProps,p=Object(n.useCallback)((function(e){e.preventDefault(),i.push("/".concat(m,"/3"))}),[i,m]);return Object(n.useEffect)((function(){return function(){t.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[t]),r.a.createElement("div",{className:"w-full text-gray-600 step-general"},r.a.createElement(T.a,{type:"text",name:"name",placeholder:"Nom de la recepta",className:"text-3xl mb-8"}),r.a.createElement("div",{className:"flex items-center mb-5"},r.a.createElement("div",{className:"w-10 mr-5 text-center"},r.a.createElement("i",{className:"fas fa-users"})),r.a.createElement(T.a,{type:"number",name:"diners",placeholder:"Numero de comen\xe7als"})),r.a.createElement("div",{className:"flex items-center mb-5"},r.a.createElement("div",{className:"w-10 mr-5 text-center"},r.a.createElement("i",{className:"fas fa-stopwatch"})),r.a.createElement(T.a,{type:"number",min:"5",step:"5",name:"cooking_time",placeholder:"Temps cocci\xf3"})),r.a.createElement("div",{className:"flex items-center mb-5"},r.a.createElement("div",{className:"w-10 mr-5 text-center"},r.a.createElement("i",{className:"fas fa-tag"})),r.a.createElement(T.a,{name:"cuisine"},(function(e){var a=e.field;return r.a.createElement("select",Object.assign({},a,{className:"w-full h-10"}),r.a.createElement("option",null,"Tipus de cuina"),r.a.createElement("option",null,"Mediterr\xe0nea"),r.a.createElement("option",null,"Asi\xe0tica"))}))),r.a.createElement("div",{className:"flex items-center mb-5"},r.a.createElement("div",{className:"w-10 mr-5 text-center"},r.a.createElement("i",{className:"far fa-images"})),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex w-full items-center mr-3"},r.a.createElement("div",d(),r.a.createElement("input",f()),r.a.createElement("button",{type:"button",className:"bg-gray-100 border border-gray-300"},r.a.createElement("span",{role:"img","aria-label":"camera"},"\ud83d\udcf8")," Puja fotos!"))),r.a.createElement("div",{className:"flex my-3"},t.map((function(e){return r.a.createElement("div",{key:e.name||e.path,className:"pic"},r.a.createElement("div",{className:"pic-inner"},r.a.createElement("img",{src:e.preview,alt:"recipie preview"})))}))))),r.a.createElement(D.a,{styled:"gradient",onClick:p,className:"shadow-full mt-8 items-center text-orange-100",size:"sm"},r.a.createElement("i",{className:"fas fa-hamburger mr-3"}),"Afegir ingredients!"))})),W=J()((function(){return r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Enviar"))})),X=t(115),Y=t(156);function Z(){var e=Object(z.a)(["\n  query getUser ($token: String!) {\n    user (filter: { accessToken: $token }) {\n      name,\n      mail,\n      accessToken,\n      pic\n    }\n  }\n"]);return Z=function(){return e},e}var ee=Object(L.a)(Z()),ae=J()((function(){var e=Object(n.useState)(null),a=Object(g.a)(e,2),t=a[0],l=a[1],c=Object(E.g)(),s=h(),i=s.user,m=s.setUser,o=Object(O.a)().locale,u=Object(X.a)(ee,{skip:null===t,variables:{token:t}}),d=u.loading,f=u.data,p=Object(n.useCallback)((function(e){e&&m(e),c.push("/".concat(o,"/2"))}),[c,m,o]);return Object(n.useEffect)((function(){i||d||!f||(localStorage.setItem("bocado_user",JSON.stringify(f.user)),p(f.user))}),[d,f,p,i]),Object(n.useEffect)((function(){if(!i){var e=new URLSearchParams(c.location.search).get("token");e&&l(e)}}),[c.location.search,i]),Object(n.useEffect)((function(){i&&p()}),[i,p]),r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-col md:flex-row justify-center items-center"},r.a.createElement("div",{className:"flex flex-col w-full md:w-1/2 md:mr-5 px-8 md:px-0"},r.a.createElement("h1",{className:"text-4xl"},r.a.createElement("span",{role:"img","aria-label":"hello"},"\ud83d\udc4b")),r.a.createElement("p",null,r.a.createElement(Y.a,{id:"intro1",values:{logo:function(e){return r.a.createElement("span",{className:"bocado"},e)}}})),r.a.createElement("p",{className:"text-xs"},r.a.createElement(Y.a,{id:"intro2"})),r.a.createElement("p",{className:"text-xs"},r.a.createElement(Y.a,{id:"intro3"}))),r.a.createElement("div",{className:"flex flex-col w-full md:w-1/2 md:ml-5 px-8 md:px-0"},r.a.createElement("div",{className:"flex flex-col justify-center bg-gray-100 p-3 rounded-lg shadow-xl"},r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"text",placeholder:"Nom i cognoms"})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"email",placeholder:"Correu electr\xf2nic"})),r.a.createElement("button",{className:"border bg-gray-300 text-gray-500"},"Registrar-me!")),r.a.createElement("div",{className:"flex"},r.a.createElement(D.a,{loading:d,onClick:function(){return function(e){var a="".concat("http://localhost:4000","/auth/").concat(e);window.location.href=a}("facebook")},className:"mt-8 items-center text-gray-100 bg-blue-700 rounded-full",size:"sm"},r.a.createElement("i",{className:"fab fa-facebook mr-3"}),"Registrar-me amb Facebook")))))})),te=t(111);function ne(){var e=Object(z.a)(["\n  query getIngredients ($locale: String!, $value: String!) {\n    ingredients(filter:{ nameByRegex:[$locale, $value]}){\n      _id\n      name{\n        ca\n        es\n      }\n    }\n  }\n"]);return ne=function(){return e},e}var re=Object(L.a)(ne());function le(e){e.getLabelProps;var a=e.getInputProps,t=e.getToggleButtonProps,n=e.getMenuProps,l=e.getItemProps,c=e.isOpen,s=e.clearSelection,i=e.selectedItem,m=e.inputValue,o=(e.highlightedIndex,e.innerRef),u=Object(O.a)().locale,d=Object(X.a)(re,{skip:!m||m.length<=3,variables:{locale:u,value:m}}),f=d.loading,p=d.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:k()("fas",f?"fa-circle-notch fa-spin":"fa-tag")}),r.a.createElement("div",{className:"relative w-full",ref:o},r.a.createElement("div",{className:"flex"},r.a.createElement("input",Object.assign({},a({value:m||"",placeholder:"Nom ingredient"}),{className:"border-0"})),i?r.a.createElement("button",{onClick:s,"aria-label":"clear selection",className:"w-10"},"X"):r.a.createElement("button",Object.assign({},t(),{className:"w-10"}),"^")),r.a.createElement("div",{style:{position:"relative"}},c?r.a.createElement("ul",Object.assign({},n(),{className:"absolute w-full z-50 bg-white rounded-b cursor-pointer overflow-y-scroll border border-gray-300 shadow-xl",style:{maxHeight:"200px"}}),p&&p.ingredients&&p.ingredients.length?p.ingredients.map((function(e,a){return r.a.createElement("li",Object.assign({className:"p-3 border-b border-gray-300",key:e._id},l({item:e,index:a})),e.name.ca)})):null):null)))}var ce=function(e){var a=Object(O.a)().locale;return r.a.createElement(te.a,{stateReducer:function(e,a){switch(a.type){case te.a.stateChangeTypes.mouseUp:return Object(v.a)({},a,{inputValue:e.inputValue});default:return a}},onInputValueChange:function(a){return e.setValue(a)},onChange:function(t){return e.setSelected({type:"db",value:t._id,label:t.name[a]})},itemToString:function(e){return e&&e.name[a]}},(function(e){return r.a.createElement(le,Object.assign({},e,e.getRootProps({refKey:"innerRef",suppressRefError:!0})))}))};var se=function(e){var a=e.push,t=e.toggle,l=Object(n.useState)(""),c=Object(g.a)(l,2),s=c[0],i=c[1],m=Object(n.useState)(null),o=Object(g.a)(m,2),u=o[0],d=o[1],f={qty:Object(n.useRef)(null),unit:Object(n.useRef)(null),name:Object(n.useRef)(null)},p=Object(n.useCallback)((function(e){var n={qty:f.qty.current.value,unit:f.unit.current.selectedOptions[0].value},r=u?Object(v.a)({},u,{},n):Object(v.a)({type:"custom",label:s,value:s},n);a(r),t(!1)}),[s,u,a,f.qty,f.unit,t]);return r.a.createElement("div",{className:"flex flex-col w-full"},r.a.createElement("div",{className:"w-full flex border border-gray-300 rounded text-gray-600 my-4"},r.a.createElement("div",{className:"w-32 flex items-center border-r border-gray-300"},r.a.createElement("input",{ref:f.qty,type:"number",className:"p-3 w-full border-0",placeholder:"Quantitat",min:"0"})),r.a.createElement("div",{className:"w-24 flex items-center border-r border-gray-300"},r.a.createElement("select",{className:"h-full w-full",ref:f.unit},r.a.createElement("option",{value:"g"},"g"),r.a.createElement("option",{value:"kg"},"kg"),r.a.createElement("option",{value:"ml"},"ml"))),r.a.createElement("div",{className:"w-full flex items-center px-2"},r.a.createElement(ce,{setValue:i,setSelected:d}))),r.a.createElement(D.a,{type:"button",className:"w-full",styled:"success",onClick:p},"Afegir"))},ie=J()((function(){var e=Object(n.useState)(!0),a=Object(g.a)(e,2),t=a[0],l=a[1],c=Object(n.useCallback)((function(){return l(!t)}),[t,l]);return r.a.createElement("div",{className:"w-full"},r.a.createElement(T.b,{name:"ingredients",render:function(e){var a=e.form.values,n=e.remove,s=e.push;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("button",{type:"button",className:"border border-gray-300 bg-gray-100 text-gray-600 mr-2",onClick:c},"Nou ingredient"),r.a.createElement(D.a,{styled:"gradient",className:"ml-2",disabled:0===a.ingredients.length},"Fet!")),t&&r.a.createElement(se,{toggle:l,push:s}),a.ingredients.map((function(e,a){var t=e.label,l=e.qty,c=e.unit;return r.a.createElement("div",{key:"ing-".concat(a),className:"flex items-center justify-between py-2 my-2 border-b border-gray-200 text-gray-500"},r.a.createElement("span",null,l,c," ",r.a.createElement("span",{className:"text-gray-700"},t)),r.a.createElement("i",{className:"far fa-times-circle cursor-pointer",onClick:function(){return n(a)}}))})))}}))}));function me(e){var a=e.toggle,t=e.push,l={text:Object(n.useRef)(null)},c=Object(n.useCallback)((function(e){var n={text:l.text.current.value};t(n),a(!1)}),[t,a,l.text]);return r.a.createElement("div",{className:"flex flex-col w-full"},r.a.createElement("div",{className:"w-full flex"},r.a.createElement("textarea",{ref:l.text,className:"w-full border border-gray-300 rounded p-3 my-3 h-64 text-gray-700",placeholder:"Explicaci\xf3 del pas a seguir"})),r.a.createElement(D.a,{type:"button",className:"w-full",styled:"success",onClick:c},"Afegir"))}var oe=J()((function(){var e=Object(n.useState)(!0),a=Object(g.a)(e,2),t=a[0],l=a[1],c=Object(n.useCallback)((function(){return l(!t)}),[t,l]);return r.a.createElement("div",{className:"w-full"},r.a.createElement(T.b,{name:"steps",render:function(e){var a=e.form.values,n=e.remove,s=e.push;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("button",{className:"border border-gray-300 bg-gray-100 text-gray-600 mr-2",onClick:c},"Nou pas"),r.a.createElement(D.a,{className:"ml-2",disabled:0===a.steps.length},"Fet!")),t&&r.a.createElement(me,{toggle:l,push:s}),a.steps.map((function(e,a){var t=e.text;return r.a.createElement("div",{key:"step-".concat(a),className:"flex items-center justify-between py-2 my-2 border-b border-gray-200 text-gray-500"},r.a.createElement("span",null,r.a.createElement("span",{className:"text-gray-700"},t)),r.a.createElement("i",{className:"far fa-times-circle cursor-pointer",onClick:function(){return n(a)}}))})))}}))})),ue=function(){var e=Object(O.a)().locale,a=C()?2:1,t="/".concat(e,"/").concat(a);return r.a.createElement(b.b.div,{exit:"undefined"},r.a.createElement(E.a,{to:t}))};var de=function(){var e=h().setStep,a=Object(E.g)(),t="PUSH"===a.action;return a.listen((function(a,t){var n=Number(a.pathname.split("/").pop());n&&!isNaN(n)&&e(n)})),r.a.createElement(V,null,r.a.createElement(b.a,{exitBeforeEnter:t},r.a.createElement(E.d,{location:a.location,key:a.location.pathname},r.a.createElement(E.b,{path:"/",exact:!0},r.a.createElement(ue,null)),r.a.createElement(E.b,{path:"/:lang",exact:!0},r.a.createElement(ue,null)),r.a.createElement(E.b,{path:"/:lang/1",exact:!0},r.a.createElement(ae,null)),r.a.createElement(E.b,{path:"/:lang/2",exact:!0},r.a.createElement(Q,null)),r.a.createElement(E.b,{path:"/:lang/3",exact:!0},r.a.createElement(ie,null)),r.a.createElement(E.b,{path:"/:lang/4",exact:!0},r.a.createElement(oe,null)),r.a.createElement(E.b,{path:"/:lang/5",exact:!0},r.a.createElement(W,null)))))},fe=(t(145),t(146),function(){var e=window.location.pathname.split("/").filter((function(e){return""!==e}))[0];if(e&&f.includes(e))return e;var a=window.localStorage.getItem("lang");return a&&f.includes(a)?a:"ca"}()),pe=new s.a({cache:new i.a,link:Object(o.createUploadLink)({uri:"".concat("http://localhost:4000","/graphql")})});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{client:pe},r.a.createElement(d.a,{locale:fe,messages:p[fe]},r.a.createElement(j,null,r.a.createElement(u.a,null,r.a.createElement(de,null)))))),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.26a72f36.chunk.js.map