(this.webpackJsonpform=this.webpackJsonpform||[]).push([[0],{118:function(e,t,a){e.exports=a.p+"static/media/logo.ceaf2aeb.png"},133:function(e,t,a){e.exports=a(151)},146:function(e,t,a){},151:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(117),c=a.n(l),s=a(81),i=a(82),o=a(114),m=a(124),u=a(38),d=a(157),f=["ca","es"],p={es:{intro1:"Somos <logo>Bocado</span>! Estamos cocinando, en pleno confinamiento por la COVID19, una aplicaci\xf3n m\xf3vil con el objetivo de compartir recetas y men\xfas saludables y equilibrados entre usuarios.",intro2:"Nosotros estamos centrados en el desarrollo y el dise\xf1o pero nos gustar\xeda poder contar contigo porque nos ayudes a completar un recetario inicial. Hemos preparado un formulario r\xe1pido y sencillo para que puedas subir tantas recetas como quieras y puedas :).",intro3:"Nos comprometemos a darte acceso para que puedas testear la app cuando est\xe9 terminada antes de presentarla al p\xfablico."},ca:{intro1:"Som <logo>Bocado</logo>! Estem cuinant, en ple confinament per la COVID19, una aplicaci\xf3 m\xf2bil amb l'objectiu de compartir receptes i men\xfas saludables i equilibrats entre usuaris.",intro2:"Nosaltres estem centrats en el desenvolupament i el disseny per\xf2 ens agradaria poder comptar amb tu perqu\xe8 ens ajudis a completar un receptari inicial. Hem preparat un formulari r\xe0pid i senzill perqu\xe8 puguis pujar tantes receptes com vulguis i puguis :).",intro3:"Ens comprometem a donar-te acc\xe9s per a que puguis testejar l'app tan bon punt la tinguem enllestida abans que en fem la presentaci\xf3 p\xfablica ;)"}},b=a(73),g=a(52),E=a(18),v=a.n(E),x=a(155),y=function(){try{var e=JSON.parse(localStorage.getItem("bocado_user"));return e||null}catch(t){return null}},N=a(19),j=a(25),h=Object(n.createContext)(),O={step:Number(window.location.hash.split("/").find((function(e){return!isNaN(Number(e))})))||1,numSteps:4,user:null};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STEP":return Object(j.a)({},e,{step:t.step});case"SET_USER":return Object(j.a)({},e,{user:t.user});default:return Object(j.a)({},e)}}function k(e){var t=e.children;return r.a.createElement(h.Provider,{value:Object(n.useReducer)(w,O)},t)}function S(){var e=Object(n.useContext)(h),t=Object(N.a)(e,2),a=t[0],r=t[1];return Object(j.a)({},a,{setStep:function(e){return r({type:"SET_STEP",step:e})},setUser:function(e){return r({type:"SET_USER",user:e})}})}var C=function(){var e=S().user;if(!e)return null;var t=e.name.split(" ").map((function(e){return e.slice(0,1)})).join("").slice(0,2);return r.a.createElement("div",{className:"w-10 h-10 rounded-full overflow-hidden shadow-lg"},e.pic?r.a.createElement("img",{src:e.pic,alt:"profile pic"}):r.a.createElement("svg",{viewBox:"0 0 100 100"},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"Gradient1"},r.a.createElement("stop",{className:"stop1",offset:"0%"}),r.a.createElement("stop",{className:"stop3",offset:"100%"})),r.a.createElement("linearGradient",{id:"Gradient2",x1:"0",x2:"0",y1:"0",y2:"1"},r.a.createElement("stop",{offset:"0%",stopColor:"#f4783c"}),r.a.createElement("stop",{offset:"100%",stopColor:"#e41c53"}))),r.a.createElement("circle",{id:"avatar",cx:"50",cy:"50",r:"50"}),r.a.createElement("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"3rem",fill:"white"},t)))},R=a(118),q=a.n(R),P="flex justify-center items-center rounded-full mx-3 w-8 h-8",U=function(){var e=Object(x.a)().locale,t=Object(g.g)(),a=S(),l=a.setUser,c=a.setStep,s=a.step,i=Object(n.useCallback)((function(a){c(a),t.push("/".concat(e,"/").concat(a))}),[t,e,c]);return Object(n.useEffect)((function(){var e=y();e&&l(e)}),[]),r.a.createElement("nav",{className:"flex sticky top-0 md:flex-row justify-start items-center w-full py-3 px-6 md:px-20 lg:px-32 mb-10 md:mb-10"},r.a.createElement("div",{className:"flex justify-end md:justify-start"},r.a.createElement(u.b,{to:"/"},r.a.createElement("figure",null,r.a.createElement("img",{src:q.a,alt:"Bocado",style:{maxWidth:"150px"}})))),r.a.createElement("div",{className:"menu hidden md:flex w-full justify-center ml-auto mr-auto"},r.a.createElement("div",{className:"flex justify-center items-center text-xs"},r.a.createElement("div",{className:v()(P,1===s?"bg-orange-200":"bg-orange-100",1===s?"text-orange-600":"text-orange-400")},"1"),r.a.createElement("span",{className:v()(1===s?"text-gray-900":"text-gray-500")},"Intro")),r.a.createElement("div",{className:"cursor-pointer flex justify-center items-center text-xs",onClick:function(){return 2!==s&&i(2)}},r.a.createElement("div",{className:v()(P,2===s?"bg-orange-200":"bg-orange-100",2===s?"text-orange-600":"text-orange-400")},"2"),r.a.createElement("span",{className:v()(2===s?"text-gray-900":"text-gray-500")},"General")),r.a.createElement("div",{className:"cursor-pointer flex justify-center items-center text-xs",onClick:function(){return 3!==s&&i(3)}},r.a.createElement("div",{className:v()(P,3===s?"bg-orange-200":"bg-orange-100",3===s?"text-orange-600":"text-orange-400")},"3"),r.a.createElement("span",{className:v()(3===s?"text-gray-900":"text-gray-500")},"Ingredients")),r.a.createElement("div",{className:"cursor-pointer flex justify-center items-center text-xs",onClick:function(){return 4!==s&&i(4)}},r.a.createElement("div",{className:v()(P,4===s?"bg-orange-200":"bg-orange-100",4===s?"text-orange-600":"text-orange-400")},"4"),r.a.createElement("span",{className:v()(4===s?"text-gray-900":"text-gray-500")},"Passos"))),r.a.createElement("div",{className:"hidden md:flex md:max-w-xs justfy-end"},r.a.createElement(C,null)))},I=a(27),T={user:{name:"",email:""},name:"test",diners:"",time:"",cooking_time:"",cuisine:"",ingredients:[],steps:[],pics:[],videos:[],picsPerStep:[]},_=function(e){var t=e.children;return r.a.createElement(I.d,{initialValues:T,onSubmit:function(e){console.log("values",e)},validate:function(){}},(function(e){e.values,e.errors;return r.a.createElement(I.c,null,t)}))},B=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement(U,null),r.a.createElement(_,null,t)))},V=a(51),F=a(71),$=a(125),L=a(56),z=a(116),A=a(33),G=function(e){var t=e.className,a=e.type,l=Object(g.g)(),c=S(),s=c.step,i=c.setStep,o=Object(x.a)().locale,m=Object(n.useCallback)((function(){var e="prev"===a?Number(s)-1:Number(s)+1;i(e),l.push("/".concat(o,"/").concat(e))}),[s,a,l,o,i]);return r.a.createElement("div",{onClick:m,style:{top:"50%"},className:v()(t,"absolute text-5xl p-5 text-gray-600 cursor-pointer","prev"===a?"left-0":"right-0")},"prev"===a?r.a.createElement("i",{className:"fas fa-angle-left"}):r.a.createElement("i",{className:"fas fa-angle-right"}))},D=function(){var e=S(),t=e.step,a=e.numSteps;return r.a.createElement(r.a.Fragment,null,t>1&&r.a.createElement(G,{type:"prev"}),t<a&&r.a.createElement(G,{type:"next"}))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.arrows,a=void 0!==t&&t;return function(e){return function(t){return r.a.createElement(b.b.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},className:"flex w-full md:max-w-screen-md lg:max-w-screen-md m-auto leading-relaxed"},r.a.createElement(e,t),a&&r.a.createElement(D,null))}}};function J(){var e=Object(F.a)(["\n  mutation Upload($file: Upload) {\n    upload(file: $file) {\n      _id\n    }\n  }\n"]);return J=function(){return e},e}var M=Object(L.a)(J()),K=H()((function(){var e=Object(n.useState)([]),t=Object(N.a)(e,2),a=t[0],l=t[1],c=Object(z.a)(M),s=Object(N.a)(c,1)[0],i=Object(g.g)(),o=Object(x.a)().locale,m=S().setStep,u=Object(n.useCallback)((function(e){l([].concat(Object(V.a)(a),Object(V.a)(e.map((function(e){return Object(j.a)({},e,{preview:URL.createObjectURL(e)})}))))),s({variables:{file:e[0]}})}),[a,l,s]),d=Object($.a)({onDrop:u,accept:"image/*"}),f=d.getRootProps,p=d.getInputProps,b=Object(n.useCallback)((function(e){e.preventDefault(),m(3),i.push("/".concat(o,"/3"))}),[i,o,m]);return Object(n.useEffect)((function(){return function(){a.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[a]),r.a.createElement("div",{className:"w-full text-gray-600 step-general"},r.a.createElement(I.a,{type:"text",name:"name",placeholder:"Nom de la recepta",className:"text-3xl mb-8"}),r.a.createElement("div",{className:"flex items-center mb-5"},r.a.createElement("div",{className:"w-10 mr-5 text-center"},r.a.createElement("i",{className:"fas fa-users"})),r.a.createElement(I.a,{type:"number",name:"diners",placeholder:"Numero de comen\xe7als"})),r.a.createElement("div",{className:"flex items-center mb-5"},r.a.createElement("div",{className:"w-10 mr-5 text-center"},r.a.createElement("i",{className:"fas fa-stopwatch"})),r.a.createElement(I.a,{type:"number",min:"5",step:"5",name:"cooking_time",placeholder:"Temps cocci\xf3"})),r.a.createElement("div",{className:"flex items-center mb-5"},r.a.createElement("div",{className:"w-10 mr-5 text-center"},r.a.createElement("i",{className:"fas fa-tag"})),r.a.createElement(I.a,{name:"cuisine"},(function(e){var t=e.field;return r.a.createElement("select",Object.assign({},t,{className:"w-full h-10"}),r.a.createElement("option",null,"Tipus de cuina"),r.a.createElement("option",null,"Mediterr\xe0nea"),r.a.createElement("option",null,"Asi\xe0tica"))}))),r.a.createElement("div",{className:"flex items-center mb-5"},r.a.createElement("div",{className:"w-10 mr-5 text-center"},r.a.createElement("i",{className:"far fa-images"})),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex w-full items-center mr-3"},r.a.createElement("div",f(),r.a.createElement("input",p()),r.a.createElement("button",{type:"button",className:"bg-gray-100 border border-gray-300"},r.a.createElement("span",{role:"img","aria-label":"camera"},"\ud83d\udcf8")," Puja fotos!"))),r.a.createElement("div",{className:"flex my-3"},a.map((function(e){return r.a.createElement("div",{key:e.name||e.path,className:"pic"},r.a.createElement("div",{className:"pic-inner"},r.a.createElement("img",{src:e.preview,alt:"recipie preview"})))}))))),r.a.createElement(A.a,{styled:"gradient",handleOnclick:b,className:"shadow-full mt-8 items-center text-orange-100",size:"sm"},r.a.createElement("i",{className:"fas fa-hamburger mr-3"}),"Afegir ingredients!"))})),Q=H()((function(){return r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Enviar"))})),W=a(115),X=a(156);function Y(){var e=Object(F.a)(["\n  query getUser ($token: String!) {\n    user (filter: { accessToken: $token }) {\n      name,\n      mail,\n      accessToken,\n      pic\n    }\n  }\n"]);return Y=function(){return e},e}var Z=Object(L.a)(Y()),ee=H()((function(){var e=Object(n.useState)(null),t=Object(N.a)(e,2),a=t[0],l=t[1],c=Object(g.g)(),s=S(),i=s.user,o=s.setUser,m=s.setStep,u=Object(x.a)().locale,d=Object(W.a)(Z,{skip:null===a,variables:{token:a}}),f=d.loading,p=d.data,b=Object(n.useCallback)((function(e){e&&o(e),m(2),c.push("/".concat(u,"/2"))}),[c,m,o,u]);return Object(n.useEffect)((function(){i||f||!p||(localStorage.setItem("bocado_user",JSON.stringify(p.user)),b(p.user))}),[f,p,b,i]),Object(n.useEffect)((function(){if(!i){var e=new URLSearchParams(c.location.search).get("token");e&&l(e)}}),[c.location.search,i]),Object(n.useEffect)((function(){i&&b()}),[i,b]),r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-col md:flex-row justify-center items-center"},r.a.createElement("div",{className:"flex flex-col w-full md:w-1/2 md:mr-5 px-8 md:px-0"},r.a.createElement("h1",{className:"text-4xl"},r.a.createElement("span",{role:"img","aria-label":"hello"},"\ud83d\udc4b")),r.a.createElement("p",null,r.a.createElement(X.a,{id:"intro1",values:{logo:function(e){return r.a.createElement("span",{className:"bocado"},e)}}})),r.a.createElement("p",{className:"text-xs"},r.a.createElement(X.a,{id:"intro2"})),r.a.createElement("p",{className:"text-xs"},r.a.createElement(X.a,{id:"intro3"}))),r.a.createElement("div",{className:"flex flex-col w-full md:w-1/2 md:ml-5 px-8 md:px-0"},r.a.createElement("div",{className:"flex flex-col justify-center bg-gray-100 p-3 rounded-lg shadow-xl"},r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"text",placeholder:"Nom i cognoms"})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"email",placeholder:"Correu electr\xf2nic"})),r.a.createElement("button",{className:"border bg-gray-300 text-gray-500"},"Registrar-me!")),r.a.createElement("div",{className:"flex"},r.a.createElement(A.a,{loading:f,onClick:function(){return function(e){var t="".concat("http://localhost:4000","/auth/").concat(e);window.location.href=t}("facebook")},className:"mt-8 items-center text-gray-100 bg-blue-700 rounded-full",size:"sm"},r.a.createElement("i",{className:"fab fa-facebook mr-3"}),"Registrar-me amb Facebook")))))})),te=a(111);function ae(){var e=Object(F.a)(["\n  query getIngredients ($locale: String!, $value: String!) {\n    ingredients(filter:{ nameByRegex:[$locale, $value]}){\n      _id\n      name{\n        ca\n        es\n      }\n    }\n  }\n"]);return ae=function(){return e},e}var ne=Object(L.a)(ae());function re(e){e.getLabelProps;var t=e.getInputProps,a=e.getToggleButtonProps,n=e.getMenuProps,l=e.getItemProps,c=e.isOpen,s=e.clearSelection,i=e.selectedItem,o=e.inputValue,m=(e.highlightedIndex,e.innerRef),u=Object(x.a)().locale,d=Object(W.a)(ne,{skip:!o||o.length<=3,variables:{locale:u,value:o}}),f=d.loading,p=d.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:v()("fas",f?"fa-circle-notch fa-spin":"fa-tag")}),r.a.createElement("div",{className:"relative w-full",ref:m},r.a.createElement("div",{className:"flex"},r.a.createElement("input",Object.assign({},t({value:o||"",placeholder:"Nom ingredient"}),{className:"border-0"})),i?r.a.createElement("button",{onClick:s,"aria-label":"clear selection",className:"w-10"},"X"):r.a.createElement("button",Object.assign({},a(),{className:"w-10"}),"^")),r.a.createElement("div",{style:{position:"relative"}},c?r.a.createElement("ul",Object.assign({},n(),{className:"absolute w-full z-50 bg-white rounded-b cursor-pointer overflow-y-scroll border border-gray-300 shadow-xl",style:{maxHeight:"200px"}}),p&&p.ingredients&&p.ingredients.length?p.ingredients.map((function(e,t){return r.a.createElement("li",Object.assign({className:"p-3 border-b border-gray-300",key:e._id},l({item:e,index:t})),e.name.ca)})):null):null)))}var le=function(e){var t=Object(x.a)().locale;return r.a.createElement(te.a,{stateReducer:function(e,t){switch(t.type){case te.a.stateChangeTypes.mouseUp:return Object(j.a)({},t,{inputValue:e.inputValue});default:return t}},onInputValueChange:function(t){return e.setValue(t)},onChange:function(a){return e.setSelected({type:"db",value:a._id,label:a.name[t]})},itemToString:function(e){return e&&e.name[t]}},(function(e){return r.a.createElement(re,Object.assign({},e,e.getRootProps({refKey:"innerRef",suppressRefError:!0})))}))};var ce=function(e){var t=e.push,a=e.toggle,l=Object(n.useState)(""),c=Object(N.a)(l,2),s=c[0],i=c[1],o=Object(n.useState)(null),m=Object(N.a)(o,2),u=m[0],d=m[1],f={qty:Object(n.useRef)(null),unit:Object(n.useRef)(null),name:Object(n.useRef)(null)},p=Object(n.useCallback)((function(e){console.log("handleClick",s,u);var n={qty:f.qty.current.value,unit:f.unit.current.selectedOptions[0].value},r=u?Object(j.a)({},u,{},n):Object(j.a)({type:"custom",label:s,value:s},n);t(r),a(!1)}),[s,u,t,f.qty,f.unit,a]);return r.a.createElement("div",{className:"flex flex-col w-full"},r.a.createElement("div",{className:"w-full flex border border-gray-300 rounded text-gray-600 my-4"},r.a.createElement("div",{className:"w-32 flex items-center border-r border-gray-300"},r.a.createElement("input",{ref:f.qty,type:"number",className:"p-3 w-full border-0",placeholder:"Quantitat",min:"0"})),r.a.createElement("div",{className:"w-24 flex items-center border-r border-gray-300"},r.a.createElement("select",{className:"h-full w-full",ref:f.unit},r.a.createElement("option",{value:"g"},"g"),r.a.createElement("option",{value:"kg"},"kg"),r.a.createElement("option",{value:"ml"},"ml"))),r.a.createElement("div",{className:"w-full flex items-center px-2"},r.a.createElement(le,{setValue:i,setSelected:d}))),r.a.createElement(A.a,{type:"button",className:"w-full",styled:"success",onClick:p},"Afegir"))},se=H()((function(){var e=Object(n.useState)(!0),t=Object(N.a)(e,2),a=t[0],l=t[1],c=Object(n.useCallback)((function(){return l(!a)}),[a,l]);return r.a.createElement("div",{className:"w-full"},r.a.createElement(I.b,{name:"ingredients",render:function(e){var t=e.form.values,n=e.remove,s=e.push;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("button",{type:"button",className:"border border-gray-300 bg-gray-100 text-gray-600 mr-2",onClick:c},"Nou ingredient"),r.a.createElement(A.a,{styled:"gradient",className:"ml-2",disabled:0===t.ingredients.length},"Fet!")),a&&r.a.createElement(ce,{toggle:l,push:s}),t.ingredients.map((function(e,t){var a=e.label,l=e.qty,c=e.unit;return r.a.createElement("div",{key:"ing-".concat(t),className:"flex items-center justify-between py-2 my-2 border-b border-gray-200 text-gray-500"},r.a.createElement("span",null,l,c," ",r.a.createElement("span",{className:"text-gray-700"},a)),r.a.createElement("i",{className:"far fa-times-circle cursor-pointer",onClick:function(){return n(t)}}))})))}}))}));function ie(e){var t=e.toggle,a=e.push,l={text:Object(n.useRef)(null)},c=Object(n.useCallback)((function(e){var n={text:l.text.current.value};a(n),t(!1)}),[a,t,l.text]);return r.a.createElement("div",{className:"flex flex-col w-full"},r.a.createElement("div",{className:"w-full flex"},r.a.createElement("textarea",{ref:l.text,className:"w-full border border-gray-300 rounded p-3 my-3 h-64 text-gray-700",placeholder:"Explicaci\xf3 del pas a seguir"})),r.a.createElement(A.a,{type:"button",className:"w-full",styled:"success",onClick:c},"Afegir"))}var oe=H()((function(){var e=Object(n.useState)(!0),t=Object(N.a)(e,2),a=t[0],l=t[1],c=Object(n.useCallback)((function(){return l(!a)}),[a,l]);return r.a.createElement("div",{className:"w-full"},r.a.createElement(I.b,{name:"steps",render:function(e){var t=e.form.values,n=e.remove,s=e.push;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("button",{className:"border border-gray-300 bg-gray-100 text-gray-600 mr-2",onClick:c},"Nou pas"),r.a.createElement(A.a,{className:"ml-2",disabled:0===t.steps.length},"Fet!")),a&&r.a.createElement(ie,{toggle:l,push:s}),t.steps.map((function(e,t){var a=e.text;return r.a.createElement("div",{key:"step-".concat(t),className:"flex items-center justify-between py-2 my-2 border-b border-gray-200 text-gray-500"},r.a.createElement("span",null,r.a.createElement("span",{className:"text-gray-700"},a)),r.a.createElement("i",{className:"far fa-times-circle cursor-pointer",onClick:function(){return n(t)}}))})))}}))})),me=function(){var e=Object(x.a)().locale,t=y()?2:1,a="/".concat(e,"/").concat(t);return r.a.createElement(b.b.div,{exit:"undefined"},r.a.createElement(g.a,{to:a}))};var ue=function(){var e=Object(g.g)(),t="PUSH"===e.action;return r.a.createElement(B,null,r.a.createElement(b.a,{exitBeforeEnter:t},r.a.createElement(g.d,{location:e.location,key:e.location.pathname},r.a.createElement(g.b,{path:"/",exact:!0},r.a.createElement(me,null)),r.a.createElement(g.b,{path:"/:lang",exact:!0},r.a.createElement(me,null)),r.a.createElement(g.b,{path:"/:lang/1",exact:!0},r.a.createElement(ee,null)),r.a.createElement(g.b,{path:"/:lang/2",exact:!0},r.a.createElement(K,null)),r.a.createElement(g.b,{path:"/:lang/3",exact:!0},r.a.createElement(se,null)),r.a.createElement(g.b,{path:"/:lang/4",exact:!0},r.a.createElement(oe,null)),r.a.createElement(g.b,{path:"/:lang/5",exact:!0},r.a.createElement(Q,null)))))},de=(a(145),a(146),function(){var e=window.location.pathname.split("/").filter((function(e){return""!==e}))[0];if(e&&f.includes(e))return e;var t=window.localStorage.getItem("lang");return t&&f.includes(t)?t:"ca"}()),fe=new s.a({cache:new i.a,link:Object(m.createUploadLink)({uri:"".concat("http://localhost:4000","/graphql")})});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{client:fe},r.a.createElement(d.a,{locale:de,messages:p[de]},r.a.createElement(k,null,r.a.createElement(u.a,null,r.a.createElement(ue,null)))))),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.f795879b.chunk.js.map